{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport LoginButton from \"../components/LoginButton\";\nimport * as SecureStore from \"expo-secure-store\";\nimport axios from \"axios\";\nimport Login from \"../components/Login\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nfunction Journal() {\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    loggedIn = _useState2[0],\n    setLoggedIn = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    emailInput = _useState4[0],\n    setEmailInput = _useState4[1];\n  var _useState5 = useState(\"\"),\n    _useState6 = _slicedToArray(_useState5, 2),\n    passInput = _useState6[0],\n    setPassInput = _useState6[1];\n  var _useState7 = useState(\"\"),\n    _useState8 = _slicedToArray(_useState7, 2),\n    curTkn = _useState8[0],\n    setCurTkn = _useState8[1];\n  var checkToken = function () {\n    var _ref = _asyncToGenerator(function* () {\n      var token = yield getToken();\n      if (token && tokenExp(token)) {\n        setLoggedIn(true);\n        setCurTkn(token);\n      } else {\n        console.warn('Incorrect User/Pass');\n        setLoggedIn(false);\n      }\n    });\n    return function checkToken() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var LogCall = function LogCall() {\n    var email = emailInput;\n    var pass = passInput;\n    Login(email, pass);\n    checkToken();\n  };\n  function getToken(_x) {\n    return _getToken.apply(this, arguments);\n  }\n  function _getToken() {\n    _getToken = _asyncToGenerator(function* (key) {\n      var result = yield SecureStore.getItemAsync('Token');\n      console.log(result);\n      if (result) {\n        return result;\n      } else {\n        console.log('No Token');\n      }\n    });\n    return _getToken.apply(this, arguments);\n  }\n  function tokenExp(_x2) {\n    return _tokenExp.apply(this, arguments);\n  }\n  function _tokenExp() {\n    _tokenExp = _asyncToGenerator(function* (tkn) {\n      var tknStatus = false;\n      var get = {\n        method: 'get',\n        url: 'http://10.15.10.115:3000/api/data/load_data',\n        headers: {\n          'Content-Type': 'x-auth',\n          'Content': tkn\n        }\n      };\n      if (true) {}\n      return tknStatus;\n    });\n    return _tokenExp.apply(this, arguments);\n  }\n  if (loggedIn) {\n    return _jsx(View, {\n      style: styles.container,\n      children: _jsx(Text, {\n        children: \"Journal\"\n      })\n    });\n  } else {\n    return _jsxs(View, {\n      style: styles.container,\n      children: [_jsx(Text, {\n        style: styles.title,\n        children: \"Login\"\n      }), _jsxs(View, {\n        style: styles.info,\n        children: [_jsx(TextInput, {\n          style: styles.infoTxt,\n          placeholder: \"Username\",\n          id: \"email\",\n          value: emailInput,\n          onChangeText: function onChangeText(text) {\n            return setEmailInput(text);\n          }\n        }), _jsx(TextInput, {\n          style: styles.infoTxt,\n          placeholder: \"Password\",\n          id: \"password\",\n          value: passInput,\n          onChangeText: function onChangeText(text) {\n            return setPassInput(text);\n          }\n        })]\n      }), _jsx(LoginButton, {\n        onPress: LogCall\n      })]\n    });\n  }\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  txtSze: {\n    fontSize: 20,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  infoTxt: {\n    padding: 10,\n    fontSize: 20\n  },\n  info: {\n    marginVertical: 20\n  },\n  title: {\n    fontSize: 50\n  }\n});\nexport default Journal;","map":{"version":3,"names":["React","useEffect","useState","LoginButton","SecureStore","axios","Login","Journal","loggedIn","setLoggedIn","emailInput","setEmailInput","passInput","setPassInput","curTkn","setCurTkn","checkToken","token","getToken","tokenExp","console","warn","LogCall","email","pass","key","result","getItemAsync","log","tkn","tknStatus","get","method","url","headers","styles","container","title","info","infoTxt","text","StyleSheet","create","flex","backgroundColor","alignItems","justifyContent","txtSze","fontSize","padding","marginVertical"],"sources":["C:/Users/PaulA/OneDrive/Documents/Drury/D-Computer_Science/D-App_Dev_2/Projects/Project 2/semester-project-myweatherapp-ppollard0/screens/Journal.js"],"sourcesContent":["/*\r\nJournal Screen:\r\nShows Login and Journal screens. Starts at Login and switches to Journal \r\nafter logging in\r\n*/\r\nimport React, {useEffect, useState} from 'react';\r\nimport { View, Text, StyleSheet, TextInput} from 'react-native';\r\nimport LoginButton from '../components/LoginButton';\r\nimport * as SecureStore from \"expo-secure-store\";\r\nimport axios from \"axios\";\r\nimport Login from \"../components/Login\";\r\n\r\n\r\nfunction Journal() {\r\n  // Set inital States\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [emailInput, setEmailInput] = useState(\"\");\r\n  const [passInput, setPassInput] = useState(\"\");\r\n  const [curTkn, setCurTkn] = useState(\"\")\r\n\r\n  // Check Token\r\n  const checkToken = async() => {\r\n    let token = await getToken();\r\n    if(token && tokenExp(token)){\r\n      setLoggedIn (true);\r\n      setCurTkn(token);\r\n    }\r\n    else{\r\n      console.warn('Incorrect User/Pass')\r\n      setLoggedIn (false);\r\n    }\r\n  }\r\n\r\n  // Call to server when logging in\r\n  const LogCall = () => {\r\n    let email = emailInput\r\n    let pass = passInput\r\n    Login(email, pass);\r\n    checkToken();\r\n  }\r\n\r\n  // Get Token if it's there\r\n  async function getToken(key) {\r\n    let result = await SecureStore.getItemAsync('Token');\r\n    console.log(result)\r\n    if (result) {\r\n      return result\r\n    }\r\n    else {\r\n      console.log('No Token')\r\n    }\r\n  }\r\n\r\n  // Check if the Token is expired\r\n  async function tokenExp(tkn) {\r\n    let tknStatus = false\r\n    let get = {\r\n      method: 'get',\r\n      url: 'http://10.15.10.115:3000/api/data/load_data',\r\n      headers: {\r\n        'Content-Type': 'x-auth',\r\n        'Content': tkn\r\n      }\r\n    };\r\n\r\n    if (true) {\r\n\r\n    }\r\n\r\n\r\n    return tknStatus\r\n  }\r\n\r\n  // Goes to Journal if logged in. Otherwise takes you to login.\r\n  if (loggedIn) {\r\n    return (\r\n      <View style={styles.container}>\r\n        <Text>Journal</Text>\r\n      </View> \r\n    )\r\n  }\r\n  else {\r\n    return (\r\n      <View style={styles.container}>\r\n        <Text style={styles.title}>Login</Text>\r\n        <View style={styles.info}>\r\n            <TextInput \r\n              style={styles.infoTxt} \r\n              placeholder=\"Username\"\r\n              id=\"email\"\r\n              value={emailInput}\r\n              onChangeText={(text) => setEmailInput(text)}\r\n              />\r\n            <TextInput \r\n              style={styles.infoTxt} \r\n              placeholder=\"Password\"\r\n              id=\"password\"\r\n              value={passInput}\r\n              onChangeText={(text) => setPassInput(text)}\r\n              />\r\n        </View>\r\n        <LoginButton onPress={LogCall}/>\r\n      </View>\r\n    )\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n      flex: 1,\r\n      backgroundColor: '#fff',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n    },\r\n    txtSze: {\r\n      fontSize: 20,\r\n      alignItems: 'center',\r\n      justifyContent: 'center'\r\n    },\r\n    infoTxt: {\r\n      padding: 10,\r\n      fontSize:20\r\n    },\r\n    info: {\r\n      marginVertical: 20\r\n    },\r\n    title: {\r\n      fontSize: 50,\r\n    }\r\n  });\r\n\r\nexport default Journal"],"mappings":"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"},"metadata":{},"sourceType":"module"}